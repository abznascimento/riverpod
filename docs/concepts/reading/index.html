<!doctype html>
<html class="docs-version-current" lang="pt-BR" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="search" type="application/opensearchdescription+xml" title="Riverpod" href="/riverpod/opensearch.xml"><title data-react-helmet="true">Reading a Provider | Riverpod</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://riverpod.dev/riverpod/img/cover.png"><meta data-react-helmet="true" name="twitter:image" content="https://riverpod.dev/riverpod/img/cover.png"><meta data-react-helmet="true" property="og:url" content="https://riverpod.dev/riverpod/docs/concepts/reading"><meta data-react-helmet="true" name="docsearch:language" content="pt-BR"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Reading a Provider | Riverpod"><meta data-react-helmet="true" name="description" content="pÃ¡gina nÃ£o traduzida, ainda."><meta data-react-helmet="true" property="og:description" content="pÃ¡gina nÃ£o traduzida, ainda."><link data-react-helmet="true" rel="icon" href="/riverpod/img/logo.svg"><link data-react-helmet="true" rel="canonical" href="https://riverpod.dev/riverpod/docs/concepts/reading"><link data-react-helmet="true" rel="alternate" href="https://riverpod.dev/riverpod/docs/concepts/reading" hreflang="pt-BR"><link data-react-helmet="true" rel="alternate" href="https://riverpod.dev/riverpod/docs/concepts/reading" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/riverpod/assets/css/styles.4a638295.css">
<link rel="preload" href="/riverpod/assets/js/runtime~main.1aa440e7.js" as="script">
<link rel="preload" href="/riverpod/assets/js/main.3dbc92fc.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Pular para o conteÃºdo principal</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/riverpod/"><div class="navbar__logo"><img src="/riverpod/img/logo.png" alt="Riverpod" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/riverpod/img/logo.png" alt="Riverpod" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Riverpod</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/riverpod/docs/getting_started">DocumentaÃ§Ã£o</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_EbrZ"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>PortuguÃªs (Brasil)</span></span></a><ul class="dropdown__menu"><li><a href="/riverpod/docs/concepts/reading" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">PortuguÃªs (Brasil)</a></li></ul></div><a href="https://github.com/rrousselGit/river_pod" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleChecked_a04y toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" checked="" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Buscar"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Buscar</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Volte para o topo" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/riverpod/docs/getting_started">Primeiros passos</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/riverpod/docs/concepts/providers">Conceitos</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/riverpod/docs/concepts/providers">Providers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/riverpod/docs/concepts/reading">Reading a Provider</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/riverpod/docs/concepts/combining_providers">Combining Provider States</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/riverpod/docs/concepts/modifiers/family">Modifiers</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/riverpod/docs/concepts/provider_observer">ProviderObserver</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/riverpod/docs/cookbooks/testing">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/riverpod/docs/cookbooks/testing">Testing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/riverpod/docs/migration/0.13.0_to_0.14.0">Migration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/riverpod/docs/migration/0.13.0_to_0.14.0">^0.13.0 to ^0.14.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/riverpod/docs/migration/0.14.0_to_1.0.0">^0.14.0 to ^1.0.0</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://github.com/rrousselGit/river_pod/tree/master/examples/counter" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist hasHref_TwRn">Official examples</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://github.com/lohanidamodar/fl_live_launcher" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist hasHref_TwRn">Third party examples</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/riverpod/docs/providers/provider">Api references</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/riverpod/docs/providers/provider">All Providers</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://pub.dev/documentation/riverpod/latest/riverpod/riverpod-library.html" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>riverpod<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://pub.dev/documentation//flutter_riverpod/latest/flutter_riverpod/flutter_riverpod-library.html" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>flutter_riverpod<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://pub.dev/documentation/hooks_riverpod/latest/hooks_riverpod/hooks_riverpod-library.html" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>hooks_riverpod<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">Nessa pÃ¡gina</button></div><div class="theme-doc-markdown markdown"><header><h1>Reading a Provider</h1></header><p>pÃ¡gina nÃ£o traduzida, ainda.</p><p>Before reading this guide, make sure to <a href="/riverpod/docs/concepts/providers">read about Providers</a> first.</p><p>In this guide, we will see how to consume a provider.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="obtaining-a-ref-object">Obtaining a &quot;ref&quot; object<a class="hash-link" href="#obtaining-a-ref-object" title="Link direto para o tÃ­tulo">â€‹</a></h2><p>First and foremost, before reading a provider, we need to obtain a &quot;ref&quot; object.</p><p>This object is what allows us to interact with providers, be it from a widget
or another provider.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="obtaining-a-ref-from-a-provider">Obtaining a &quot;ref&quot; from a provider<a class="hash-link" href="#obtaining-a-ref-from-a-provider" title="Link direto para o tÃ­tulo">â€‹</a></h3><p>All providers receive a &quot;ref&quot; as a parameter:</p><div class="codeBlockContainer_J+bg language-dart theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">final provider = Provider((ref) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  // use ref to obtain other providers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  final repository = ref.watch(repositoryProvider);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return SomeValue(repository);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">})</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><p>This parameter is safe to pass to the value exposed by the provider.</p><p>For example, a common use-case is to pass the provider&#x27;s &quot;ref&quot; to a <a href="https://pub.dev/documentation/state_notifier/latest/state_notifier/StateNotifier-class.html" target="_blank" rel="noopener noreferrer">StateNotifier</a>:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">final counterProvider = StateNotifierProvider&lt;Counter, int&gt;((ref) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return Counter(ref);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">});</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">class Counter extends StateNotifier&lt;int&gt; {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Counter(this.ref): super(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  final Ref ref;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  void increment() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Counter can use the &quot;ref&quot; to read other providers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    final repository = ref.read(repositoryProvider);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    repository.post(&#x27;...&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><p>Doing so allows our <code>Counter</code> class to read providers.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="obtaining-a-ref-from-a-widget">Obtaining a &quot;ref&quot; from a widget<a class="hash-link" href="#obtaining-a-ref-from-a-widget" title="Link direto para o tÃ­tulo">â€‹</a></h3><p>Widgets naturally do not have a ref parameter. But <a href="https://github.com/rrousselgit/river_pod" target="_blank" rel="noopener noreferrer">Riverpod</a> offers multiple
solutions to obtain one from widgets.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="extending-consumerwidget-instead-of-statelesswidget">Extending ConsumerWidget instead of StatelessWidget<a class="hash-link" href="#extending-consumerwidget-instead-of-statelesswidget" title="Link direto para o tÃ­tulo">â€‹</a></h4><p>The most common way to obtain a ref in the widget tree is
to replace <a href="https://api.flutter.dev/flutter/widgets/StatelessWidget-class.html" target="_blank" rel="noopener noreferrer">StatelessWidget</a> with <a href="https://pub.dev/documentation/flutter_riverpod/latest/flutter_riverpod/ConsumerWidget-class.html" target="_blank" rel="noopener noreferrer">ConsumerWidget</a>.</p><p><a href="https://pub.dev/documentation/flutter_riverpod/latest/flutter_riverpod/ConsumerWidget-class.html" target="_blank" rel="noopener noreferrer">ConsumerWidget</a> is identical in use to <a href="https://api.flutter.dev/flutter/widgets/StatelessWidget-class.html" target="_blank" rel="noopener noreferrer">StatelessWidget</a>, with the only
difference being that it has an extra parameter on its build method: the &quot;ref&quot; object.</p><p>A typical <a href="https://pub.dev/documentation/flutter_riverpod/latest/flutter_riverpod/ConsumerWidget-class.html" target="_blank" rel="noopener noreferrer">ConsumerWidget</a> looks like:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">class HomeView extends ConsumerWidget {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  const HomeView({Key? key}): super(key: key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  @override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Widget build(BuildContext context, WidgetRef ref) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // use ref to listen to a provider</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    final counter = ref.watch(counterProvider);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return Text(&#x27;$counter&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="extending-consumerstatefulwidgetconsumerstate-instead-of-statefulwidgetstate">Extending ConsumerStatefulWidget+ConsumerState instead of StatefulWidget+State<a class="hash-link" href="#extending-consumerstatefulwidgetconsumerstate-instead-of-statefulwidgetstate" title="Link direto para o tÃ­tulo">â€‹</a></h4><p>Similar to <a href="https://pub.dev/documentation/flutter_riverpod/latest/flutter_riverpod/ConsumerWidget-class.html" target="_blank" rel="noopener noreferrer">ConsumerWidget</a>, <a href="https://pub.dev/documentation/flutter_riverpod/latest/flutter_riverpod/ConsumerState-class.html" target="_blank" rel="noopener noreferrer">ConsumerStatefulWidget</a> and <a href="https://pub.dev/documentation/flutter_riverpod/latest/flutter_riverpod/ConsumerStatefulWidget-class.html" target="_blank" rel="noopener noreferrer">ConsumerState</a> are the equivalent of a
<a href="https://api.flutter.dev/flutter/widgets/StatefulWidget-class.html" target="_blank" rel="noopener noreferrer">StatefulWidget</a> with its <a href="https://api.flutter.dev/flutter/widgets/State-class.html" target="_blank" rel="noopener noreferrer">State</a>, with the difference that the state has a &quot;ref&quot; object.</p><p>This time, the &quot;ref&quot; isn&#x27;t passed as parameter of the build method, but is
a property of the <a href="https://pub.dev/documentation/flutter_riverpod/latest/flutter_riverpod/ConsumerStatefulWidget-class.html" target="_blank" rel="noopener noreferrer">ConsumerState</a> object:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">class HomeView extends ConsumerStatefulWidget {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  const HomeView({Key? key}): super(key: key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  @override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  HomeViewState createState() =&gt; HomeViewState();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">class HomeViewState extends ConsumerState&lt;HomeView&gt; {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  @override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  void initState() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    super.initState();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // &quot;ref&quot; can be used in all life-cycles of a StatefulWidget.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ref.read(counterProvider);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  @override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Widget build(BuildContext context) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // We can also use &quot;ref&quot; to listen to a provider inside the build method</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    final counter = ref.watch(counterProvider);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return Text(&#x27;$counter&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="extending-hookconsumerwidget-instead-of-hookwidget">Extending HookConsumerWidget instead of HookWidget<a class="hash-link" href="#extending-hookconsumerwidget-instead-of-hookwidget" title="Link direto para o tÃ­tulo">â€‹</a></h4><p>This option is for <a href="https://github.com/rrousselGit/flutter_hooks" target="_blank" rel="noopener noreferrer">flutter_hooks</a> users. Since <a href="https://github.com/rrousselGit/flutter_hooks" target="_blank" rel="noopener noreferrer">flutter_hooks</a> requires
extending <a href="https://pub.dev/documentation/flutter_hooks/latest/flutter_hooks/HookWidget-class.html" target="_blank" rel="noopener noreferrer">HookWidget</a> to work, widgets that use hooks are unable to extend
<a href="https://pub.dev/documentation/flutter_riverpod/latest/flutter_riverpod/ConsumerWidget-class.html" target="_blank" rel="noopener noreferrer">ConsumerWidget</a>.</p><p>The package <a href="https://pub.dev/packages/hooks_riverpod" target="_blank" rel="noopener noreferrer">hooks_riverpod</a> exposes a new widget called <a href="https://pub.dev/documentation/hooks_riverpod/latest/hooks_riverpod/HookConsumerWidget-class.html" target="_blank" rel="noopener noreferrer">HookConsumerWidget</a>.
<a href="https://pub.dev/documentation/hooks_riverpod/latest/hooks_riverpod/HookConsumerWidget-class.html" target="_blank" rel="noopener noreferrer">HookConsumerWidget</a> acts as both a <a href="https://pub.dev/documentation/flutter_riverpod/latest/flutter_riverpod/ConsumerWidget-class.html" target="_blank" rel="noopener noreferrer">ConsumerWidget</a> and a <a href="https://pub.dev/documentation/flutter_hooks/latest/flutter_hooks/HookWidget-class.html" target="_blank" rel="noopener noreferrer">HookWidget</a>. This
allows a widget to both listen to providers and use hooks.</p><p>An example would be:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">class HomeView extends HookConsumerWidget {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  const HomeView({Key? key}): super(key: key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  @override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Widget build(BuildContext context, WidgetRef ref) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // HookConsumerWidget allows using hooks inside the build method</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    final state = useState(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // We can also use the ref parameter to listen to providers.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    final counter = ref.watch(counterProvider);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return Text(&#x27;$counter&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="extending-statefulhookconsumerwidget-instead-of-hookwidget">Extending StatefulHookConsumerWidget instead of HookWidget<a class="hash-link" href="#extending-statefulhookconsumerwidget-instead-of-hookwidget" title="Link direto para o tÃ­tulo">â€‹</a></h4><p>This option is for <a href="https://github.com/rrousselGit/flutter_hooks" target="_blank" rel="noopener noreferrer">flutter_hooks</a> users, who need to use <a href="https://api.flutter.dev/flutter/widgets/StatefulWidget-class.html" target="_blank" rel="noopener noreferrer">StatefulWidget</a> lifecycle methods in addition to hooks.</p><p>An example would be:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">class HomeView extends StatefulHookConsumerWidget {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  const HomeView({Key? key}) : super(key: key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  @override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  HomeViewState createState() =&gt; HomeViewState();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">class HomeViewState extends ConsumerState&lt;HomeView&gt; {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  @override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  void initState() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    super.initState();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // &quot;ref&quot; can be used in all life-cycles of a StatefulWidget.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ref.read(counterProvider);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  @override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Widget build(BuildContext context) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Like HookConsumerWidget, we can use hooks inside the builder</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    final state = useState(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // We can also use &quot;ref&quot; to listen to a provider inside the build method</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    final counter = ref.watch(counterProvider);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return Text(&#x27;$counter&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="consumer-and-hookconsumer-widgets">Consumer and HookConsumer widgets<a class="hash-link" href="#consumer-and-hookconsumer-widgets" title="Link direto para o tÃ­tulo">â€‹</a></h4><p>A final way to obtain a &quot;ref&quot; inside widgets is to rely on <a href="https://pub.dev/documentation/flutter_riverpod/latest/flutter_riverpod/Consumer-class.html" target="_blank" rel="noopener noreferrer">Consumer</a>/
<a href="https://pub.dev/documentation/hooks_riverpod/latest/hooks_riverpod/HookConsumer-class.html" target="_blank" rel="noopener noreferrer">HookConsumer</a>.</p><p>These classes are widgets that can be used to obtain a &quot;ref&quot; in a builder callback, with the same
properties as <a href="https://pub.dev/documentation/flutter_riverpod/latest/flutter_riverpod/ConsumerWidget-class.html" target="_blank" rel="noopener noreferrer">ConsumerWidget</a>/<a href="https://pub.dev/documentation/hooks_riverpod/latest/hooks_riverpod/HookConsumerWidget-class.html" target="_blank" rel="noopener noreferrer">HookConsumerWidget</a>.</p><p>As such, these widgets are a way to obtain a &quot;ref&quot; without having to define a class.
An example would be:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Scaffold(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  body: HookConsumer(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    builder: (context, ref, child) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      // Like HookConsumerWidget, we can use hooks inside the builder</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      final state = useState(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      // We can also use the ref parameter to listen to providers.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      final counter = ref.watch(counterProvider);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      return Text(&#x27;$counter&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">);</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="using-ref-to-interact-with-providers">Using ref to interact with providers<a class="hash-link" href="#using-ref-to-interact-with-providers" title="Link direto para o tÃ­tulo">â€‹</a></h2><p>Now that we have a &quot;ref&quot;, we can start using it.</p><p>There are three primary usages for &quot;ref&quot;:</p><ul><li>obtaining the value of a provider and listening to changes, such that when
this value changes, this will rebuild the widget or provider that subscribed
to the value.
This is done using <code>ref.watch</code></li><li>adding a listener on a provider, to execute an action such as navigating to a new
page or showing a modal whenever that provider changes.<br>This is done using <code>ref.listen</code>.</li><li>obtaining the value of a provider while ignoring changes.
This is useful when we need the value of a provider in an event
such as &quot;on click&quot;.
This is done using <code>ref.read</code>.</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Whenever possible, prefer using <code>ref.watch</code> over <code>ref.read</code> or <code>ref.listen</code> to
implement a feature.<br>
<!-- -->By relying on <code>ref.watch</code>, your application becomes both reactive
and declarative, which makes it more maintainable.</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="using-refwatch-to-observe-a-provider">Using ref.watch to observe a provider<a class="hash-link" href="#using-refwatch-to-observe-a-provider" title="Link direto para o tÃ­tulo">â€‹</a></h3><p><code>ref.watch</code> is used inside the <code>build</code> method of a widget or
inside the body of a provider to have the widget/provider listen to a provider:</p><p>For example, a provider could use <code>ref.watch</code> to combine multiple providers
into a new value.</p><p>An example would be filtering a todo-list.
We could have two providers:</p><ul><li><code>filterTypeProvider</code>, a provider that exposes the current type of filter
(none, show only completed tasks, ...)</li><li><code>todosProvider</code>, a provider that exposes the entire list of tasks</li></ul><p>And by using <code>ref.watch</code>, we could make a third provider that combines both providers to
create a filtered list of tasks:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">final filterTypeProvider = StateProvider&lt;FilterType&gt;((ref) =&gt; FilterType.none);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">final todosProvider = StateNotifierProvider&lt;TodoList, List&lt;Todo&gt;&gt;((ref) =&gt; TodoList());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">final filteredTodoListProvider = Provider((ref) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  // obtains both the filter and the list of todos</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  final FilterType filter = ref.watch(filterTypeProvider);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  final List&lt;Todo&gt; todos = ref.watch(todosProvider);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  switch (filter) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    case FilterType.completed:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      // return the completed list of todos</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      return todos.where((todo) =&gt; todo.isCompleted).toList();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    case FilterType.none:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      // returns the unfiltered list of todos</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      return todos;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">});</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><p>With this code, <code>filteredTodoListProvider</code> now exposes the filtered list of tasks.</p><p>The filtered list will also automatically update if either the filter or the list of tasks
changed. At the same time, the filtered list will not be recomputed if
neither the filter nor the list of tasks changed.</p><p>Similarly, a widget can use <code>ref.watch</code> to show
the content from a provider and update the user interface whenever that content changes:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">final counterProvider = StateProvider((ref) =&gt; 0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">class HomeView extends ConsumerWidget {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  const HomeView({Key? key}): super(key: key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  @override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Widget build(BuildContext context, WidgetRef ref) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // use ref to listen to a provider</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    final counter = ref.watch(counterProvider);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return Text(&#x27;$counter&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><p>This snippet shows a widget that listens to a provider which stores a <code>count</code>.
And if that <code>count</code> changes, the widget will rebuild and the UI will update
to show the new value.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>The <code>watch</code> method should not be called asynchronously,
like inside an <code>onPressed</code> of an <a href="https://api.flutter.dev/flutter/material/ElevatedButton-class.html" target="_blank" rel="noopener noreferrer">ElevatedButton</a>. Nor should it be used
inside <code>initState</code> and other <a href="https://api.flutter.dev/flutter/widgets/State-class.html" target="_blank" rel="noopener noreferrer">State</a> life-cycles.</p><p>In those cases, consider using <code>ref.read</code> instead.</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="using-reflisten-to-react-to-a-provider-change">Using ref.listen to react to a provider change<a class="hash-link" href="#using-reflisten-to-react-to-a-provider-change" title="Link direto para o tÃ­tulo">â€‹</a></h3><p>Similarly to <code>ref.watch</code>, it is possible to use <code>ref.listen</code> to observe a provider.</p><p>The main difference between them is that, rather than rebuilding the widget/provider
if the listened to provider changes, using <code>ref.listen</code> will instead call a custom function.</p><p>That can be useful for performing actions when a certain change happens, such
as showing a snackbar when an error happens.</p><p>The <code>ref.listen</code> method needs 2 positional arguments, the first one is the Provider and the second one is the callback function that we want to execute when the state changes.
The callback function when called will be passed 2 values, the value of the previous State and the value of the new State.</p><p>The <code>ref.listen</code> method can be used inside the body of a provider:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">final counterProvider = StateNotifierProvider&lt;Counter, int&gt;((ref) =&gt; Counter(ref));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">final anotherProvider = Provider((ref) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ref.listen&lt;int&gt;(counterProvider, (int? previousCount, int newCount) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    print(&#x27;The counter changed $newCount&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  });</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  // ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">});</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><p>or inside the <code>build</code> method of a widget:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">final counterProvider = StateNotifierProvider&lt;Counter, int&gt;((ref) =&gt; Counter(ref));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">class HomeView extends ConsumerWidget {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  const HomeView({Key? key}): super(key: key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  @override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Widget build(BuildContext context, WidgetRef ref) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ref.listen&lt;int&gt;(counterProvider, (int? previousCount, int newCount) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      print(&#x27;The counter changed $newCount&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return Container();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>The <code>listen</code> method should not be called asynchronously,
like inside an <code>onPressed</code> of an <a href="https://api.flutter.dev/flutter/material/ElevatedButton-class.html" target="_blank" rel="noopener noreferrer">ElevatedButton</a>. Nor should it be used
inside <code>initState</code> and other <a href="https://api.flutter.dev/flutter/widgets/State-class.html" target="_blank" rel="noopener noreferrer">State</a> life-cycles.</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="using-refread-to-obtain-the-state-of-a-provider">Using ref.read to obtain the state of a provider<a class="hash-link" href="#using-refread-to-obtain-the-state-of-a-provider" title="Link direto para o tÃ­tulo">â€‹</a></h3><p>The <code>ref.read</code> method is a way to obtain the state of a provider without listening to it.</p><p>It is commonly used inside functions triggered by user interactions.
For example, we can use <code>ref.read</code> to increment a counter when a user clicks a button:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">final counterProvider = StateNotifierProvider&lt;Counter, int&gt;((ref) =&gt; Counter(ref));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">class HomeView extends ConsumerWidget {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  const HomeView({Key? key}): super(key: key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  @override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Widget build(BuildContext context, WidgetRef ref) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return Scaffold(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      floatingActionButton: FloatingActionButton(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        onPressed: () {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          // Call `increment()` on the `Counter` class</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          ref.read(counterProvider.notifier).increment();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Using <code>ref.read</code> should be avoided as much as possible because it is not reactive.</p><p>It exists for cases where using <code>watch</code> or <code>listen</code> would cause issues.
If you can, it is almost always better to use <code>watch</code>/<code>listen</code>, especially <code>watch</code>.</p></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="dont-use-refread-inside-the-build-method"><strong>DON&#x27;T</strong> use <code>ref.read</code> inside the build method<a class="hash-link" href="#dont-use-refread-inside-the-build-method" title="Link direto para o tÃ­tulo">â€‹</a></h4><p>You might be tempted to use <code>ref.read</code> to optimize the performance of a widget
by doing:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">final counterProvider = StateProvider((ref) =&gt; 0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Widget build(BuildContext context, WidgetRef ref) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  // use &quot;read&quot; to ignore updates on a provider</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  final counter = ref.read(counterProvider.notifier);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return ElevatedButton(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    onPressed: () =&gt; counter.state++,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    child: const Text(&#x27;button&#x27;),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><p>But this is a very bad practice and can cause bugs that are difficult to track.</p><p>Using <code>ref.read</code> this way is commonly associated with the thought &quot;The value
exposed by a provider never changes so using &#x27;ref.read&#x27; is safe&quot;. The problem
with this assumption is that, while today that provider may indeed never update
its value, there is no guarantee that tomorrow will be the same.</p><p>Software tends to change a lot, and it is likely that in the future, a value
that previously never changed will need to change.<br>
<!-- -->If you use <code>ref.read</code>, when that value needs to change, you have
to go through your entire codebase to change <code>ref.read</code> into <code>ref.watch</code> â€“
which is error prone and you are likely to forget some cases.</p><p>If you use <code>ref.watch</code> to begin with, you will have fewer problems when refactoring.</p><p><strong><em>But I wanted to use <code>ref.read</code> to reduce the number of times my widget rebuilds</em></strong></p><p>While the goal is commendable, it is important to note that you can achieve the
exact same effect (reducing the number of builds) using <code>ref.watch</code> instead.</p><p>Providers offer various ways to obtain a value while reducing the number of
rebuilds, which you could use instead.</p><p>For example instead of</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">final counterProvider = StateProvider((ref) =&gt; 0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Widget build(BuildContext context, WidgetRef ref) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  StateController&lt;int&gt; counter = ref.read(counterProvider.notifier);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return ElevatedButton(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    onPressed: () =&gt; counter.state++,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    child: const Text(&#x27;button&#x27;),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><p>we could do:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">final counterProvider = StateProvider((ref) =&gt; 0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Widget build(BuildContext context, WidgetRef ref) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  StateController&lt;int&gt; counter = ref.watch(counterProvider.notifier);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return ElevatedButton(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    onPressed: () =&gt; counter.state++,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    child: const Text(&#x27;button&#x27;),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><p>Both snippets achieve the same effect: our button will not rebuild when the
counter increments.</p><p>On the other hand, the second approach supports cases where the counter is reset.
For example, another part of the application could call:</p><div class="codeBlockContainer_J+bg language-dart theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ref.refresh(counterProvider);</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><p>which would recreate the <code>StateController</code> object.</p><p>If we used <code>ref.read</code> here, our button would still use the previous
<code>StateController</code> instance, which was disposed and should no-longer be used.<br>
<!-- -->Whereas using <code>ref.watch</code> correctly rebuilds the button to use the new <code>StateController</code>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="deciding-what-to-read">Deciding what to read<a class="hash-link" href="#deciding-what-to-read" title="Link direto para o tÃ­tulo">â€‹</a></h2><p>Depending on the provider you want to listen to, you may have multiple possible
values that you can listen to.</p><p>As an example, consider the following <a href="/riverpod/docs/providers/stream_provider">StreamProvider</a>:</p><div class="codeBlockContainer_J+bg language-dart theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">final userProvider = StreamProvider&lt;User&gt;(...);</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><p>When reading this <code>userProvider</code>, you can:</p><ul><li><p>synchronously read the current state by listening to <code>userProvider</code> itself:</p><div class="codeBlockContainer_J+bg language-dart theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Widget build(BuildContext context, WidgetRef ref) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  AsyncValue&lt;User&gt; user = ref.watch(userProvider);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return user.when(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    loading: () =&gt; const CircularProgressIndicator(),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    error: (error, stack) =&gt; const Text(&#x27;Oops&#x27;),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    data: (user) =&gt; Text(user.name),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div></li><li><p>obtain the associated <a href="https://api.dart.dev/stable/2.13.4/dart-async/Stream-class.html" target="_blank" rel="noopener noreferrer">Stream</a>, by listening to <code>userProvider.stream</code>:</p><div class="codeBlockContainer_J+bg language-dart theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Widget build(BuildContext context, WidgetRef ref) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Stream&lt;User&gt; user = ref.watch(userProvider.stream);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div></li><li><p>obtain a <a href="https://api.dart.dev/stable/2.13.4/dart-async/Future-class.html" target="_blank" rel="noopener noreferrer">Future</a> that resolves with the latest value emitted, by listening to <code>userProvider.future</code>:</p><div class="codeBlockContainer_J+bg language-dart theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Widget build(BuildContext context, WidgetRef ref) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Future&lt;User&gt; user = ref.watch(userProvider.future);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div></li></ul><p>Other providers may offer different alternative values.<br>
<!-- -->For more information, refer to the documentation of each provider by
consulting the <a href="https://pub.dev/documentation/riverpod/latest/riverpod/riverpod-library.html" target="_blank" rel="noopener noreferrer">API reference</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="using-select-to-filter-rebuilds">Using &quot;select&quot; to filter rebuilds<a class="hash-link" href="#using-select-to-filter-rebuilds" title="Link direto para o tÃ­tulo">â€‹</a></h2><p>One final feature to mention related to reading providers is the ability to
reduce the number of times a widget/provider rebuilds from <code>ref.watch</code>, or how often <code>ref.listen</code>
executes a function.</p><p>This is important to keep in mind as, by default, listening to a provider
listens to the entire object state. But sometimes, a widget/provider may only
care about changes to some properties instead of the whole object.</p><p>For example, a provider may expose a <code>User</code>:</p><div class="codeBlockContainer_J+bg language-dart theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">abstract class User {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  String get name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  int get age;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><p>But a widget may only use the user name:</p><div class="codeBlockContainer_J+bg language-dart theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Widget build(BuildContext context, WidgetRef ref) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  User user = ref.watch(userProvider);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return Text(user.name);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><p>If we naively used <code>ref.watch</code>, this would rebuild the widget when the user&#x27;s
<code>age</code> changes.</p><p>The solution is to use <code>select</code> to explicitly tell Riverpod that we only
want to listen to the name property of the <code>User</code>.</p><p>The updated code would be:</p><div class="codeBlockContainer_J+bg language-dart theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Widget build(BuildContext context, WidgetRef ref) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  String name = ref.watch(userProvider.select((user) =&gt; user.name));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return Text(name);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><p>By using <code>select</code>, we are able to specify a function
that returns the property that we care about.</p><p>Whenever the <code>User</code> changes, Riverpod will call this function and
compare the previous and new result. If they are different (such as when the name
changed), Riverpod will rebuild the widget.<br>
<!-- -->However, if they are equal (such as when the age changed), Riverpod will not
rebuild the widget.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>It is also possible to use <code>select</code> with <code>ref.listen</code>:</p><div class="codeBlockContainer_J+bg language-dart theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ref.listen&lt;String&gt;(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  userProvider.select((user) =&gt; user.name),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  (String? previousName, String newName) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    print(&#x27;The user name changed $newName&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">);</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div><p>Doing so will call the listener only when the name changes.</p></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>You don&#x27;t have to return a property of the object. Any value that
overrides == will work. For example you could do:</p><div class="codeBlockContainer_J+bg language-dart theme-code-block"><div class="codeBlockContent_csEI dart"><pre tabindex="0" class="prism-code language-dart codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">final label = ref.watch(userProvider.select((user) =&gt; &#x27;Mr ${user.name}&#x27;));</span><br></span></code></pre><button type="button" aria-label="Copiar cÃ³digo para a Ã¡rea de transferÃªncia" class="copyButton_M3SB clean-btn">Copiar</button></div></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rrousselGit/river_pod/edit/master/website/i18n/pt-BR/docusaurus-plugin-content-docs/current/concepts/reading.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Editar essa pÃ¡gina</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="NavigaÃ§Ã£o das pÃ¡ginas de documentaÃ§Ã£o"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/riverpod/docs/concepts/providers"><div class="pagination-nav__sublabel">Anterior</div><div class="pagination-nav__label">Providers</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/riverpod/docs/concepts/combining_providers"><div class="pagination-nav__sublabel">PrÃ³xima</div><div class="pagination-nav__label">Combining Provider States</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#obtaining-a-ref-object" class="table-of-contents__link toc-highlight">Obtaining a &quot;ref&quot; object</a><ul><li><a href="#obtaining-a-ref-from-a-provider" class="table-of-contents__link toc-highlight">Obtaining a &quot;ref&quot; from a provider</a></li><li><a href="#obtaining-a-ref-from-a-widget" class="table-of-contents__link toc-highlight">Obtaining a &quot;ref&quot; from a widget</a></li></ul></li><li><a href="#using-ref-to-interact-with-providers" class="table-of-contents__link toc-highlight">Using ref to interact with providers</a><ul><li><a href="#using-refwatch-to-observe-a-provider" class="table-of-contents__link toc-highlight">Using ref.watch to observe a provider</a></li><li><a href="#using-reflisten-to-react-to-a-provider-change" class="table-of-contents__link toc-highlight">Using ref.listen to react to a provider change</a></li><li><a href="#using-refread-to-obtain-the-state-of-a-provider" class="table-of-contents__link toc-highlight">Using ref.read to obtain the state of a provider</a></li></ul></li><li><a href="#deciding-what-to-read" class="table-of-contents__link toc-highlight">Deciding what to read</a></li><li><a href="#using-select-to-filter-rebuilds" class="table-of-contents__link toc-highlight">Using &quot;select&quot; to filter rebuilds</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">DocumentaÃ§Ã£o</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/riverpod/docs/getting_started">Primeiros passos</a></li></ul></div><div class="col footer__col"><div class="footer__title">Comunidade</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/flutter" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/remi_rousselet" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/rrousselgit/river_pod" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/rrousselGit/river_pod/blob/master/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CÃ³digo de conduta<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Patrocinadores</div><ul class="footer__items"><li class="footer__item"><a href="https://www.netlify.com"><img src="https://www.netlify.com/img/global/badges/netlify-color-bg.svg" alt="Deploys by Netlify"></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/riverpod/img/full_logo.svg" alt="Riverpod" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/riverpod/img/full_logo.svg" alt="Riverpod" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></div><div class="footer__copyright">Direito autoral Â© 2022 Remi Rousselet.<br> ConstruÃ­do com Docusaurus.</div></div></div></footer></div>
<script src="/riverpod/assets/js/runtime~main.1aa440e7.js"></script>
<script src="/riverpod/assets/js/main.3dbc92fc.js"></script>
</body>
</html>